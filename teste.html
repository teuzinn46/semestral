<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulário de Contato</title>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.6.4/dist/email.min.js"></script>
</head>
<body>

  <form class="formulario" id="contactForm" onsubmit="sendMail(event)">
    <label for="nome">Nome Completo:</label>
    <input type="text" id="nome" name="nome" required><br><br>

    <label for="email">E-mail:</label>
    <input type="email" id="email" name="email" required><br><br>

    <label for="telefone">Telefone:</label>
    <input type="tel" id="telefone" name="telefone" required><br><br>

    <label for="curriculo">Anexar Arquivo:</label>
    <input type="file" id="curriculo" name="curriculo" required><br><br>

    <label for="importancia">O que considera importante numa empresa?</label><br>
    <textarea id="importancia" name="importancia" rows="4" required></textarea><br><br>

    <button type="submit">Enviar</button>
  </form>

  <p id="result"></p> <!-- Exibe o resultado do envio -->

  <script>
    // Inicialize o EmailJS com sua chave de usuário
    (function() {
      emailjs.init("rI2Ll_wfpPUtynsda"); // Substitua pela sua chave do EmailJS
    })();

    function sendMail(event) {
      event.preventDefault(); // Impede o envio padrão do formulário

      const form = document.getElementById('contactForm');
      const formData = new FormData(form);

      // Obtém o arquivo do input
      const fileInput = document.getElementById('curriculo').files[0];

      // Carregar o arquivo usando base64 para enviá-lo pelo EmailJS
      const reader = new FileReader();
      reader.readAsDataURL(fileInput);
      reader.onload = function() {
        const fileData = reader.result.split(',')[1]; // Remove o prefixo data

        // Dados para enviar com o EmailJS
        const data = {
          nome: formData.get('nome'),
          email: formData.get('email'),
          telefone: formData.get('telefone'),
          importancia: formData.get('importancia'),
          curriculo: fileData,
          curriculo_nome: fileInput.name
        };

        // Envio do e-mail pelo EmailJS
        emailjs.send("seu_id_de_servico", "seu_id_de_template", data)
          .then(response => {
            document.getElementById('result').innerText = "E-mail enviado com sucesso!";
            console.log("E-mail enviado", response);
          })
          .catch(error => {
            document.getElementById('result').innerText = "Erro ao enviar e-mail.";
            console.error("Erro", error);
          });
      };

      reader.onerror = function(error) {
        console.error("Erro ao ler o arquivo:", error);
        alert("Erro ao ler o arquivo.");
      };
    }
  </script>

</body>
</html>
